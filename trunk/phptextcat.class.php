<?php/* * Author: Christophe Dri *  *  Might be commented soon, or, please contribute. */class PhpTextCat {    const DIR_LANGUAGES = 'languages/';    const EXTENSION_LANGUAGES = '.lng';    protected $_languages = array();    public function __construct(array $languages = null) {        if (is_array($languages)) {            foreach ($languages as $lng) {                // Load languages N-grams                if (file_exists(self::DIR_LANGUAGES . $lng . self::EXTENSION_LANGUAGES))                    $this->_languages[$lng] = str_replace('_', ' ', file(self::DIR_LANGUAGES . $lng . self::EXTENSION_LANGUAGES, FILE_IGNORE_NEW_LINES));            }        }    }    public function markLanguage($text) {        // Attribute Ranks for languages depending on text words.        $text = strtolower($text);        $count = array();        foreach ($this->_languages as $lng => $ngrams) {            $count[$lng] = 0;            foreach ($ngrams as $ngram) {                $count[$lng] += substr_count($text, $ngram);            }        }        arsort($count);        return $count;    }    public function guessLanguage($text) {        return reset(array_keys($this->markLanguage($text)));    }}